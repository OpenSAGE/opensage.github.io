<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/component---src-templates-post-js.d2ac1a46b4834ac760cb.css">@import url(https://fonts.googleapis.com/css?family=Noto+Serif+TC|Source+Code+Pro);*{box-sizing:border-box}body,html{margin:0;padding:0;min-height:100%;display:flex;width:100%}body{font-family:"Noto Serif TC",serif;font-size:16px;line-height:1.6}h1{margin-top:2em}h2{margin-top:1.5em;margin-bottom:.5em}#___gatsby,#___gatsby>div{display:flex;height:100%;width:100%}.page{max-width:100%}#main-content,.page{display:flex;flex-direction:column;flex-grow:1;width:100%}#main-content{flex-shrink:0;padding-left:2em;padding-right:2em;margin-left:auto;margin-right:auto;margin-bottom:40px;max-width:700px}.row{display:flex;flex-direction:row;flex-shrink:0}.row+.row{margin-top:16px}.width-50{max-width:50%;flex-shrink:0}.responsive-image{display:flex;flex-shrink:1;max-width:100%}.responsive-image+.responsive-image,.responsive-image-container+.responsive-image-container{margin-left:16px}@media screen and (max-width:450px){.row{flex-direction:column}.responsive-image,.responsive-image+.responsive-image,.responsive-image-container+.responsive-image-container{margin-top:16px;margin-left:0}}footer{background:#000;color:#fff;font-size:12px}.footer__content{max-width:900px;margin-left:auto;margin-right:auto;padding:8px}.header__logo{height:100px;min-height:80px;background:url(/opensage-logo.png);background-size:contain;background-position:50%;background-repeat:no-repeat}.navbar{border-bottom:2px solid #000}.navbar__items{margin:0 auto 16px;list-style:none;display:flex;flex-direction:row;justify-content:center}.nav-item{display:inline-flex}.nav-item:not(last-child){margin-right:40px}.nav-item a{color:#000;text-decoration:none}.nav-item a:hover{text-decoration:underline}.post-content img{max-width:100%}.post-content h2>a,.post-content h3>a{text-decoration:none;color:initial}.post-content li,.post-content p{text-align:justify}.post-content blockquote{border-left:4px solid #d3d3d3;padding-left:1em;margin-left:0}.post-content pre{color:#333;background:#eee;padding:1em;overflow-x:auto}.post-content pre code{line-height:1.2;font-size:.8rem}.post-content code,.post-content pre code{font-family:Source Code Pro,Menlo,Consolas,monospace}.post-content code{background:#eee;color:#333;padding:2px 4px}.post-metadata span{display:block}.post-metadata__author{font-weight:700}.post-content .video-responsive{overflow:hidden;padding-bottom:56.25%;position:relative;height:0}.post-content .video-responsive>iframe{position:absolute;top:0;left:0;width:100%;height:100%}.post-content .table-wrapper{max-width:100%;overflow-x:auto;border:1px solid #bdc1c4}.post-content table{border-collapse:collapse}.post-content table th{background-color:#f0f0f0;padding-left:1em;padding-right:1em;width:auto}.post-content table td,.post-content table th{border-bottom:1px solid #bdc1c4;border-right:1px solid #ccc;padding:.5rem;white-space:nowrap}</style><style data-href="/0.24bf1742e3764eb5de3c.css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}</style><meta name="generator" content="Gatsby 2.0.73"/><title data-react-helmet="true">OpenSAGE Dev Diary #5 - OpenSAGE</title><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1"/><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link as="script" rel="preload" href="/webpack-runtime-cfe94d564db3cc9a4af5.js"/><link as="script" rel="preload" href="/app-a59aed0f94aff211795a.js"/><link as="script" rel="preload" href="/0-fdb546639c1c10770604.js"/><link as="script" rel="preload" href="/1-d8e8b120a95f8cf248dc.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-4766c8b33af9fb1664ca.js"/><link as="fetch" rel="preload" href="/static/d/750/path---blog-dev-diary-5-d-12-9af-lY5xvbR74FIzhEFJGhuqJgOKQ.json" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="page"><header><a href="/"><div class="header__logo"></div></a><nav class="navbar"><ol class="navbar__items"><li class="nav-item"><a href="/">About</a></li><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="https://github.com/OpenSAGE/OpenSAGE">GitHub</a></li><li class="nav-item"><a href="https://discord.gg/G2FhZUT">Discord</a></li></ol></nav></header><div id="main-content"><h1>OpenSAGE Dev Diary #5</h1><div class="post-metadata"><span class="post-metadata__author">Tim Jones</span><span class="post-metadata__date">07 January 2018</span></div><div class="post-content"><p><em><a href="http://timjones.io/blog/archive/2018/01/07/opensage-dev-diary-5">This post</a> was originally published on Tim's blog.</em></p>
<p><em>OpenSAGE is an open-source re-implementation of the <a href="https://en.wikipedia.org/wiki/SAGE_(game_engine)">SAGE game engine</a>. SAGE was the game engine used in C&#x26;C Generals, C&#x26;C Generals Zero Hour, Battle for Middle-earth and its sequels, C&#x26;C 3 and its sequel, and Red Alert 3 and its sequel. I've been working on OpenSAGE for 6 months, and made some good progress, so I've started this series of blog posts to talk about what is happening in the project each week. You can also star or watch the <a href="https://github.com/OpenSAGE/OpenSAGE">OpenSAGE GitHub repo</a> for a more real-time view of things.</em></p>
<p>Following on from <a href="/blog/archive/2017/12/24/opensage-dev-diary-4-2017-12-24">the previous post</a>, here is what's been happening this week in <a href="https://github.com/OpenSAGE/OpenSAGE">OpenSAGE</a>.</p>
<h2 id="progress-this-week">Progress this week</h2>
<p>The last two weeks have been exciting ones for the OpenSAGE project. For the first time, as much has been done by other contributors as by me, which marks an exciting turning point for the project.</p>
<p>This week's contributors (other than me):</p>
<ul>
<li><a href="https://github.com/feliwir">Stephan Vedder</a></li>
<li><a href="https://github.com/paavohuhtala">Paavo Huhtala</a></li>
</ul>
<p>In the last two weeks:</p>
<ul>
<li>
<p>Paavo <a href="https://github.com/OpenSAGE/OpenSAGE/pull/13">fixed parsing of floating-point values in .ini files for locales with decimal separators other than "."</a>, and <a href="https://github.com/OpenSAGE/OpenSAGE/pull/24">fixed a related issue</a>.</p>
</li>
<li>
<p>Paavo <a href="https://github.com/OpenSAGE/OpenSAGE/pull/14">fixed .wnd controls that have a null header template</a>.</p>
</li>
<li>
<p>I <a href="https://github.com/OpenSAGE/OpenSAGE/commit/61994bee78f963a40eb4fea2c86c8113ceef78ab">simplified the render pipeline</a>, because it was getting unnecessarily complex.</p>
</li>
<li>
<p>Paavo <a href="https://github.com/OpenSAGE/OpenSAGE/pull/15">added support for the Origin version of Zero Hour's registry key</a>.</p>
</li>
<li>
<p>Paavo <a href="https://github.com/OpenSAGE/OpenSAGE/pull/16">created an Xunit test discoverer to allow skipping of tests that depend on games that aren't currently installed</a>.</p>
</li>
<li>
<p>I parsed BFME I and BFME II <code>.map</code> files. It turned out there were lots of new and modified chunks for these games: <code>CameraAnimationList</code>, <code>EnvironmentData</code>, <code>LibraryMapLists</code>, <code>MPPositionList</code>, <code>NamedCameras</code>, <code>PolygonTriggers</code>, <code>PostEffectsChunk</code>, <code>RiverAreas</code>, <code>SkyboxSettings</code>, <code>StandingWaterAreas</code>, <code>StandingWaveAreas</code>, and <code>Teams</code>. There aren't any existing specifications for these chunks so I had to figure them out by hand. BFME scripts have a few new fields, like <code>Enabled</code> and <code>Inverted</code> and some related to sequential scripts. There's a problem with terrain tile texture blending in BFME maps that I still need to fix, as you can see this in screenshot:</p>
<p><a
    class="gatsby-resp-image-link"
    href="/static/49d9f24e11757d58c599b9e0a6870416/1ee56/opensage-2018-01-08-bfmeii-map.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 600px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 60.416666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACr0lEQVQoz1WSaU8aURSG/SfWmjQ11qpo3EZxoSwKKMiIAwMCIrIIolXqkthaUtumaexvrAoq7liXD+rTuQPWepObk9zkPuc9531risUi5+fnXF7+4fb2VquXlEpHej08PGQzv8X8Qo7VtXW2f/7g1/Y2+c+bbH3J822rcjc2PvJpM8/3r3lqjo+P9Y9HR0fc399zdXXFzs4O5XKZ3b09hoeacfTX4rL1YDC08rqhgbq6F9TX19HY2EBz00veNr2is6sDo7GPGgESQAG+u7vTVZ6enuoKi8U9NtMWssEOYpNtTE92EvJKxFUjyYCJ1JSNVNBIQG5j1NrImLOnorB0WNIhAnhzUwGWy5cUCnusJqwsBltZnu5hPW5lPWlnOTbCXNiO225iSnGjyGNMOLpIBVqeRhaQh4eHKvBEBx4Ud1kKG0hHhkmEnMRUO4tJhbTWIKG2Izv78Y7b8LptGtysvXdQc3Jyou/vEfg4sgDuF36zkpZJTrkIeXqxW3owD3Yij5qYdFvwjUuMO7sIBRw4R9oZtkrVkUslBFiMfH19XQWWOdgvsrYcZ25aJqXdRNRHJGjHL5vp7ZVQJ94RUIYIRV14vUZN6fCTKY8KLy4udIMEUDRazWWIKjYWwkZysxJL2SjR4DgtrS3InkGtkYeY1iwdVwkrluoOSxVTxBEg8SZyWSzskMtGWEj6SSrdJAJm5mb8BN0mXY0yJml7NBCLyloTFyZTnQA+KRTn4j9gobCrxaOPhZRKNu7Xx84kQkS8Vmb9DoIeE+GAnfn0NB5HK2P2pieXz87OninUXdZ2uDIjkVE7WEyHeZ+NsZiJkIn7WJqPkk2FtZpE9ZrpHqjFbH713JRKbG7+xWZfC/aHmW7SvjfMTw0wo4wQliUS/hbiPlGtpFQLkQkJl6NJi46Bv2jDjqaRhRN1AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;"
        alt="BFME II map"
        title=""
        src="/static/49d9f24e11757d58c599b9e0a6870416/7a630/opensage-2018-01-08-bfmeii-map.png"
        srcset="/static/49d9f24e11757d58c599b9e0a6870416/46d37/opensage-2018-01-08-bfmeii-map.png 150w,
/static/49d9f24e11757d58c599b9e0a6870416/c218a/opensage-2018-01-08-bfmeii-map.png 300w,
/static/49d9f24e11757d58c599b9e0a6870416/7a630/opensage-2018-01-08-bfmeii-map.png 600w,
/static/49d9f24e11757d58c599b9e0a6870416/91b84/opensage-2018-01-08-bfmeii-map.png 900w,
/static/49d9f24e11757d58c599b9e0a6870416/b8f57/opensage-2018-01-08-bfmeii-map.png 1200w,
/static/49d9f24e11757d58c599b9e0a6870416/6f30d/opensage-2018-01-08-bfmeii-map.png 1800w,
/static/49d9f24e11757d58c599b9e0a6870416/1ee56/opensage-2018-01-08-bfmeii-map.png 2880w"
        sizes="(max-width: 600px) 100vw, 600px"
      />
  </span>
  </a></p>
</li>
<li>
<p>Stephan <a href="https://github.com/OpenSAGE/OpenSAGE/pull/20">fixed .dds and .tga previews in the Data Viewer</a>.</p>
</li>
<li>
<p>Paavo <a href="https://github.com/OpenSAGE/OpenSAGE/pull/21">fixed a crash in the Data Viewer that occurred when switching between different assets</a>.</p>
</li>
<li>
<p>Paavo <a href="https://github.com/OpenSAGE/OpenSAGE/pull/23">fixed a bug in the Z positioning of some map objects</a>.</p>
</li>
<li>
<p>Paavo <a href="https://github.com/OpenSAGE/OpenSAGE/pull/29">fixed / implemented a number of things related to loading campaign maps</a>.</p>
</li>
<li>
<p>Stephan <a href="https://github.com/OpenSAGE/OpenSAGE/pull/28">implemented a viewer for .ru files</a>. <code>.ru</code> files store the raw geometry for APT UI screens, and this was a major stepping stone to the APT implementation that Stephan is continuing to work on.</p>
<p><a
    class="gatsby-resp-image-link"
    href="/static/557127bf90045259a8a4794a1ad325c3/2821a/ru_viewer.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 600px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 79.72709551656921%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACWUlEQVQ4y52TS2sTURTH7zzSNtXWiCFtFUE0JlTNo5IaqiIVVHDtyo2rJmnaPMfWCOIX8JPopoJfouBSKSiGPCYzmZm8KualdPH3zjXRPIxQF3/OzGHO7/7PuWfI51wRsqLCqNbR7HxHs91FpdZg72W9gi/ZPN7uvcOb13vIFnLQGzXIahkFWUGxpKJQUqCUdWhGlX5vgJiFh4eHaDQa6HY6qFWryGQykKQ0bq3dxPkrZ2EP2OB/5MTjVw8Q3FyG+/4lOBx2zFqtEHgeXq8Xz3Z3EY/HQBhd01CiJ7XbbdTrdaTSaUSjW7j3cB22pROwLszAfnke55YdOLk4hTnHLJYu2EEIYXI6nUgkEgiFQiCqZkDXdaiqig51aDqVJImeFsdqMPC7aFSiRYAoiuzZ7XYjlUohEokMA1vt1hDQ4/GwAo7nQDgaqUhfZp7jWHS5XH+AZst9oNnyINDn8w0VjmoCUGMzVBQFrVZzCGgO+9hAWSkzWLFYpC2POPT/2yHPTwCa7cqyPAZcvRHoFfJsftzAHKemLRAE4XjA/2pZ1eil9GbY6XaPdSmm878D6S2bwPbAHsa2Y7hz9zYEcRwmCDxsZ+boLoqTgWyxRxyuXF/5tX9kGCqIAixT4oS1oUCNOTQXu4M6BaYZMAFPf4asNW5AZCBvAt1IUmDYBBqGjlpFh1FWcfSji29fG9hJJ5GMb8PnuTrx12PAXnQ5L0JKJhANb4DsH+Tx/iCH/Q9ZfFLq+JjXsbnzEhvJ57gWXAeZOQ3h1CL4+YUxiTRPpm1w+tcQll7gydZT/AQswaYNdwWB0QAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    ></span>
    <img
        class="gatsby-resp-image-image"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;"
        alt="Screenshot of .ru viewer"
        title=""
        src="/static/557127bf90045259a8a4794a1ad325c3/7a630/ru_viewer.png"
        srcset="/static/557127bf90045259a8a4794a1ad325c3/46d37/ru_viewer.png 150w,
/static/557127bf90045259a8a4794a1ad325c3/c218a/ru_viewer.png 300w,
/static/557127bf90045259a8a4794a1ad325c3/7a630/ru_viewer.png 600w,
/static/557127bf90045259a8a4794a1ad325c3/91b84/ru_viewer.png 900w,
/static/557127bf90045259a8a4794a1ad325c3/2821a/ru_viewer.png 1026w"
        sizes="(max-width: 600px) 100vw, 600px"
      />
  </span>
  </a></p>
</li>
<li>
<p>I parsed more BFME <code>.ini</code> files. These are obviously not required for Generals, but I find it helpful to get a detailed overview of  other SAGE games, so I can better design some of the engine abstractions.</p>
</li>
<li>
<p>Stephan <a href="https://github.com/OpenSAGE/OpenSAGE/pull/38">updated the Xunit NuGet package</a> - a small but nice bit of maintenance that makes tests run more reliably.</p>
</li>
<li>
<p>Paavo <a href="https://github.com/OpenSAGE/OpenSAGE/pull/35">added a project for the game executable</a>. This is the start of something that will eventually be <em>the</em> way to play games using OpenSAGE. For now, it launches the Generals main menu with the background scene ("shell map") underneath.</p>
<blockquote class="twitter-video" data-lang="en"><p lang="en" dir="ltr">Something pretty experimental... <a href="https://twitter.com/hashtag/OpenSAGE?src=hash&amp;ref_src=twsrc%5Etfw">#OpenSAGE</a> <a href="https://t.co/6IOaAWTbLY">pic.twitter.com/6IOaAWTbLY</a></p>&mdash; Paavo Huhtala (@paavohtl) <a href="https://twitter.com/paavohtl/status/948352514814038016?ref_src=twsrc%5Etfw">January 3, 2018</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</li>
<li>
<p>I started a refactoring of OpenSAGE's scene framework. Up to now I have been using a simplified version of Unity's <code>GameObject</code> / <code>Component</code> model, but this doesn't really match how SAGE originally worked. So I'm changing things about a bit, in order to provide a simpler and more stable foundation going forwards.</p>
</li>
</ul>
<p>In non-development news, we now have an <a href="https://discord.gg/G2FhZUT">OpenSAGE Discord server</a>. Follow that invitation link to join. We're already having lots of lively discussions, so if you're at all interested in SAGE games or the OpenSAGE project, please join us.</p>
<p>I also found a mention of OpenSAGE on a <a href="http://www.cncseries.ru/opensage/">Russian C&#x26;C website</a>, which is pretty cool. Considering how little effort I've put into spreading the word, it's nice to see that people are hearing about it.</p>
<p>That's all for this time - until next week!</p></div></div><footer><div class="footer__content"><p>OpenSAGE is an open source project and not associated with Electronic Arts or any other company. All trademarks are property of their respective owners. Screenshots of copyrighted works are only used for demonstration purposes.</p><p>Â© OpenSAGE <!-- -->2018</p></div></footer></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-post-js","jsonName":"blog-dev-diary-5-d12","path":"/blog/dev-diary-5"};window.dataPath="750/path---blog-dev-diary-5-d-12-9af-lY5xvbR74FIzhEFJGhuqJgOKQ";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-a59aed0f94aff211795a.js"],"component---src-templates-post-js":["/component---src-templates-post-js.d2ac1a46b4834ac760cb.css","/component---src-templates-post-js-4766c8b33af9fb1664ca.js"],"component---src-pages-404-js":["/component---src-pages-404-js-7f310243cc7626c49131.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js.da8e6e846b6d400a4985.css","/component---src-pages-blog-js-137500fdf0b4bfff2e59.js"],"component---src-pages-index-js":["/component---src-pages-index-js.da8e6e846b6d400a4985.css","/component---src-pages-index-js-ee9a0e788f0505c4fc01.js"]};/*]]>*/</script><script src="/component---src-templates-post-js-4766c8b33af9fb1664ca.js" async=""></script><script src="/1-d8e8b120a95f8cf248dc.js" async=""></script><script src="/0-fdb546639c1c10770604.js" async=""></script><script src="/app-a59aed0f94aff211795a.js" async=""></script><script src="/webpack-runtime-cfe94d564db3cc9a4af5.js" async=""></script></body></html>