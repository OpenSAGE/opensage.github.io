<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.1d2ed03f53ff3b4dac78.css" data-identity="gatsby-global-css">@import url(https://fonts.googleapis.com/css?family=Noto+Serif+TC|Source+Code+Pro);
/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}*{box-sizing:border-box}body,html{display:flex;margin:0;min-height:100%;padding:0;width:100%}body{font-family:"Noto Serif TC",serif;font-size:16px;line-height:1.6}h1,h2{margin-top:1em}h2{margin-bottom:.5em}h1+h2,h2+ul{margin-top:0}#___gatsby,#___gatsby>div{display:flex;height:100%;width:100%}.page{max-width:100%}#main-content,.page{display:flex;flex-direction:column;flex-grow:1;width:100%}#main-content{flex-shrink:0;margin-bottom:40px;margin-left:auto;margin-right:auto;max-width:700px;padding-left:2em;padding-right:2em}.row{display:flex;flex-direction:row;flex-shrink:0}.row+.row{margin-top:16px}.width-50{flex-shrink:0;max-width:50%}.responsive-image{display:flex;flex-shrink:1;max-width:100%}.responsive-image+.responsive-image,.responsive-image-container+.responsive-image-container{margin-left:16px}@media screen and (max-width:450px){.row{flex-direction:column}.responsive-image,.responsive-image+.responsive-image,.responsive-image-container+.responsive-image-container{margin-left:0;margin-top:16px}}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}footer{background:#000;color:#fff;font-size:12px}.footer__content{margin-left:auto;margin-right:auto;max-width:900px;padding:8px}.header__logo{background:url(/opensage-logo.png);background-position:50%;background-repeat:no-repeat;background-size:contain;height:100px;min-height:80px}.navbar{border-bottom:2px solid #000}.navbar__items{display:flex;flex-direction:row;justify-content:center;list-style:none;margin:0 auto 16px}.nav-item{display:inline-flex}.nav-item:not(last-child){margin-right:40px}.nav-item a{color:#000;text-decoration:none}.nav-item a:hover{text-decoration:underline}@media screen and (max-width:350px){.navbar__items{flex-direction:column}.nav-item{margin-left:0;margin-right:0}.nav-item:not(last-child){margin-bottom:8px}}.post-content img{max-width:100%}.post-content .gatsby-resp-image-wrapper,.post-content .video-responsive{margin-bottom:2em;margin-top:2em}.post-content h2>a,.post-content h3>a{color:initial;text-decoration:none}.post-content li>p{margin-bottom:8px;margin-top:2px}.post-content blockquote{border-left:4px solid #d3d3d3;margin-left:0;padding-left:1em}.post-content pre{background:#eee;color:#333;overflow-x:auto;padding:1em}.post-content pre code{font-size:.8rem;line-height:1.2}.post-content code,.post-content pre code{font-family:Source Code Pro,Menlo,Consolas,monospace}.post-content code{background:#eee;color:#333;padding:2px 4px}.post-metadata span{display:block}.post-metadata__author{font-weight:700}.post-content .video-responsive{height:0;overflow:hidden;padding-bottom:56.25%;position:relative}.post-content .video-responsive>iframe{height:100%;left:0;position:absolute;top:0;width:100%}.post-content .table-wrapper{border:1px solid #bdc1c4;max-width:100%;overflow-x:auto}.post-content table{border-collapse:collapse}.post-content table th{background-color:#f0f0f0;padding-left:1em;padding-right:1em;width:auto}.post-content table td,.post-content table th{border-bottom:1px solid #bdc1c4;border-right:1px solid #ccc;padding:.5rem;white-space:nowrap}</style><meta name="generator" content="Gatsby 3.14.3"/><title data-react-helmet="true">Strange Obsession - Simple Water Rendering: Overview - OpenSAGE</title><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1"/><meta data-react-helmet="true" name="twitter:title" content="Strange Obsession - Simple Water Rendering: Overview - OpenSAGE blog"/><meta data-react-helmet="true" name="twitter:image" content="https://opensage.github.io/main-menu-social.jpg"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" property="og:title" content="Strange Obsession - Simple Water Rendering: Overview - OpenSAGE blog"/><meta data-react-helmet="true" property="og:url" content="https://opensage.github.io/blog/water-rendering/"/><meta data-react-helmet="true" property="og:image" content="https://opensage.github.io/main-menu-social.jpg"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="article:published_time" content="2021-07-10T00:00:00.000Z"/><link as="script" rel="preload" href="/webpack-runtime-da80e4af2c7a62b87dee.js"/><link as="script" rel="preload" href="/framework-3ff8eac72944ada5b1d3.js"/><link as="script" rel="preload" href="/app-4c0eca78ab875c07fb76.js"/><link as="script" rel="preload" href="/146795efe668deebd307e23d1bee48404d46676b-61b9cf2c73f895e6907b.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-4e75ef5397eab02032db.js"/><link as="fetch" rel="preload" href="/page-data/blog/water-rendering/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="page"><header><a href="/"><div class="header__logo"></div></a><nav class="navbar"><ol class="navbar__items"><li class="nav-item"><a href="/">About</a></li><li class="nav-item"><a href="/blog">Blog</a></li><li class="nav-item"><a href="https://github.com/OpenSAGE/OpenSAGE">GitHub</a></li><li class="nav-item"><a href="https://discord.gg/G2FhZUT">Discord</a></li></ol></nav></header><div id="main-content"><h1>Strange Obsession - Simple Water Rendering: Overview</h1><div class="post-metadata"><span class="post-metadata__author">VectorIV</span><span class="post-metadata__date">10 July 2021</span></div><div class="post-content"><h2>Overview</h2>
<p>Water can be broken down into several main components: reflection, refraction, waves and caustics.</p>
<p><strong>Reflection</strong> may include the reflection of the enviroments, game objects, light sources and self-reflection. It should reflect what's on the surface while blending the colour and the waves of the water itself.</p>
<p><strong>Refraction</strong> is kind of the opposite of reflection. Instead of reflecting what's on the surface, it should distort what's under the surface with respect to the colour, the waves and the depth of the water.</p>
<p><strong>Waves</strong> are distortion on the surface level caused by forces of nature such as wind. Waves in a river, a lake and an ocean aren't the same, we should take that fact into consideration.</p>
<p><strong>Caustics</strong> are, basically speaking, dancing lights you see both under and above a body of moving water. It's actually caused by reflection and refraction, but for simplicity's sake, we'll just talk only about the refraction aspect.</p>
<h2>Reflection</h2>
<p>There are many ways to implement reflection namely cube map, environment map, planar, screen space or the new real-time "ray tracing." In the case of the original game and this implementation, we'll be using the planar method.
In a nutshell, planar reflection is:</p>
<ol>
<li>You mirror a copy of the player's camera in respect to the water plane in symmetrical manner.</li>
<li>You go down the render pipeline almost the same as you would the actual camera but you render to a new frame buffer using the mirrored camera and inverted clipping plane.</li>
<li>Use the frame buffer as a texture on the plane and apply shader techniques to it to make it looks convincing.</li>
</ol>
<p>This is done per plane so the more water plane present on the map, the more expensive it is.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/fbfb9857d1f44a6456ea530aeddf537d/5a190/1.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA6UlEQVQoz5WS24qEMAyGff8HFC9c6IWgWLA1PZGmqcsYdGQYV/a7akN+/pya7Z947wGg1rptW/NHHhGFED4iWmulFBE9iEspV3GtdRxHpVTf98MweO+/i2ut67ouy5JSkggzO+e893UHEYno1jml5JxDRHkDQM75I6c5raROOpCv1tpa65wrB3zwEjOzUupnBwD8Toxxmqau69q2BYAYowSNMfM86x1mfjnnnHFH/M9pISIzSyFSlDT/dr7rGRFTStJnKUXaDiFcDW7Fp+c1EmO01soUH/bMzGfe9cKMMQ9lywpKKV+PR8S/glrBdjY8V8YAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Reflection Rendering"
        title="Reflection Rendering"
        src="/static/fbfb9857d1f44a6456ea530aeddf537d/0a47e/1.png"
        srcset="/static/fbfb9857d1f44a6456ea530aeddf537d/8a4e8/1.png 150w,
/static/fbfb9857d1f44a6456ea530aeddf537d/5a46d/1.png 300w,
/static/fbfb9857d1f44a6456ea530aeddf537d/0a47e/1.png 600w,
/static/fbfb9857d1f44a6456ea530aeddf537d/5a190/1.png 800w"
        sizes="(max-width: 600px) 100vw, 600px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span>
<em><center>Figure 1: Camera For Reflection Rendering</center></em></p>
<h2>Refraction</h2>
<p>Refraction is fairly simple to achieve. You only need to render it the parts that's below the water plane.
So in a nutshell:</p>
<ol>
<li>Using the current player camera and clipping plane, render to a new frame buffer.</li>
<li>Use the frame buffer as a texture on the plane and apply shader techniques to it to make it looks convincing.</li>
</ol>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/35f2dd7626dbf92bfbb57260fe6e87d9/5a190/2.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 41.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAuUlEQVQY06WO3YqFMAyE+/6vaLXqhWIQLKlNk/4uHJel7MI5F/tdBBJmJqPaW2qtvy73fQNAKaW1pt44U0qI2F+stcuyjOPIzB/MpZQQQp91HMd5ngCwbRsiqp96fcNaKwDs+05Ez+q9R8Scc5/+4XOMMaXknBORvwJVSvEviIg7iMg5N8/zdV1EJCLM/Mie+W1e19UYM02T915EQggxRgDQWltrY4zMHEIQEUQchkFrbYzJOav2D74ApJPTudfbx7AAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Refraction Rendering"
        title="Refraction Rendering"
        src="/static/35f2dd7626dbf92bfbb57260fe6e87d9/0a47e/2.png"
        srcset="/static/35f2dd7626dbf92bfbb57260fe6e87d9/8a4e8/2.png 150w,
/static/35f2dd7626dbf92bfbb57260fe6e87d9/5a46d/2.png 300w,
/static/35f2dd7626dbf92bfbb57260fe6e87d9/0a47e/2.png 600w,
/static/35f2dd7626dbf92bfbb57260fe6e87d9/5a190/2.png 800w"
        sizes="(max-width: 600px) 100vw, 600px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span>
<em><center>Figure 2: Camera For Refraction Rendering</center></em></p>
<h2>Waves</h2>
<p>This is done at shader level either via vertex or fragment. Many techniques could be used here including DuDv mapping, bump mapping, normal mapping, etc.
We'll using only fragment for this implementation.</p>
<p><strong>DuDv Mapping</strong> is simply a directional distortion map usually derived from a normal map. It only has R and G channels for offsetting U and V values of the texture. This creates ripple effects on the surface.
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 256px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/5fd71ea606c87536d7fd25ba14229307/e4a55/wdudv.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECA//EABgBAAIDAAAAAAAAAAAAAAAAAAECAAME/9oADAMBAAIQAxAAAAHnNXA2FQ4BPYJX/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAEQESAh/9oACAEBAAEFAjmKGxOP/8QAFhEAAwAAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/ASv/xAAVEQEBAAAAAAAAAAAAAAAAAAAQQf/aAAgBAgEBPwEh/8QAFRABAQAAAAAAAAAAAAAAAAAAIDH/2gAIAQEABj8Cgh//xAAdEAEBAQAABwAAAAAAAAAAAAABABEhMVFxgZHB/9oACAEBAAE/IeX1Z1erPMIcNZGdkkmwDf/aAAwDAQACAAMAAAAQBy+C/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERUf/aAAgBAwEBPxClaRRDbp//xAAVEQEBAAAAAAAAAAAAAAAAAAARAP/aAAgBAgEBPxBJiN//xAAcEAEAAgIDAQAAAAAAAAAAAAABABEhQTFhgVH/2gAIAQEAAT8Qb11C3JGC5rsjHLC/XiULPUbOaeS8hQHUIAcOrYJaT//Z'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="DuDv Map"
        title="DuDv Map"
        src="/static/5fd71ea606c87536d7fd25ba14229307/e4a55/wdudv.jpg"
        srcset="/static/5fd71ea606c87536d7fd25ba14229307/75985/wdudv.jpg 150w,
/static/5fd71ea606c87536d7fd25ba14229307/e4a55/wdudv.jpg 256w"
        sizes="(max-width: 256px) 100vw, 256px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span>
<em><center>Figure 3: Sample DvDu Map</center></em></p>
<p><strong>Normal Mapping</strong> is an extensive bump map used for lighting calculation. Having all RGB channels, they are represented as XYZ directions. This creates the illusion of a detailed surface without having a lot of polygons.
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 256px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/4308988d0ece9e9ab06e20efd743a265/e4a55/wnormal.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBA//EABgBAAIDAAAAAAAAAAAAAAAAAAECAAME/9oADAMBAAIQAxAAAAG5qtqQ0TAh6ha//8QAGBAAAwEBAAAAAAAAAAAAAAAAAAEQESH/2gAIAQEAAQUCOGXBsTn/xAAWEQADAAAAAAAAAAAAAAAAAAAAEBH/2gAIAQMBAT8BK//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABUQAQEAAAAAAAAAAAAAAAAAACAx/9oACAEBAAY/AoIf/8QAHBABAQEAAQUAAAAAAAAAAAAAAQARkSExUXHB/9oACAEBAAE/Ie31Z5cXKEOmsjPSSTYNv//aAAwDAQACAAMAAAAQbwj9/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARUf/aAAgBAwEBPxDbXbACV2//xAAYEQEAAwEAAAAAAAAAAAAAAAABABARMf/aAAgBAgEBPxDco5FZ/8QAHBABAAICAwEAAAAAAAAAAAAAAQARITFBYYFR/9oACAEBAAE/EG+OmFtkYLGa7IscsL9ZsHqNnNPJeQoDqEAOE1bBFs//2Q=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Normal Map"
        title="Normal Map"
        src="/static/4308988d0ece9e9ab06e20efd743a265/e4a55/wnormal.jpg"
        srcset="/static/4308988d0ece9e9ab06e20efd743a265/75985/wnormal.jpg 150w,
/static/4308988d0ece9e9ab06e20efd743a265/e4a55/wnormal.jpg 256w"
        sizes="(max-width: 256px) 100vw, 256px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span>
<em><center>Figure 4: Sample Normal Map</center></em></p>
<h2>Caustics</h2>
<p>This is also done at shader level as well using fragment. The simplest and the only way I know how to do is using animated textures. By having a set of pre-baked textures, one can animate it to simulate the effects of caustics.
At higher level of shadering, I assume one may simulate caustics from the movement of the waves and direction of the lightsource.</p>
<p>In a nutshell, you use add blending to apply the animated textures to terrain and objects under the water plane with respect to the depth of said subjects. The deeper the subject, the more transparent the apply should be.
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 224px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/0bdfcadcf8550c5e135a9f40d20bc6eb/80b2d/cause.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEkUlEQVQ4yy2TWy8jfQCH53rvRfbajQs2cYpilPSgptNRxn+m0WrDtGyjpVt0Ilq1VlZ2t7oOF4SEhCBxiEOz1aBaW3qQntKDqSpxDMkmLvgEb+y7zxf4/S6eB7q9vQ0GgwzDeDyem5ubRCJxd3fn9/vT6fTx8XEymby8vGQYJpVKRSKRcDgcCARubm6i0ejz8zN0cHCAoqhUKuXxeHK5XKfTuVyutra2pqYmFEUxDNNoNGNjY4uLiziOSyQSoVDY2tr68ePHZDIJnZ2d4ThOURSfz9fpdBUVFYeHh1++fJFIJCiKymQygiC6urqOj4/FYrFCoeBwON3d3TAMx+NxaH9/v6ampre3l8vlEgTR0dHhcrmkUqlCoZDJZGw2m6Ko6enpmZkZDofT2dlZVlYmlUo7OztTqRTk8XgQBAEAfP78uaioiKbpk5MTg8FQWVlpNptFIhGKoktLS9vb2wKBQCaTGY3GwsJCmqYzmQwUj8dVKtWHDx/0er1CoXj37p3dbp+ammKxWHV1dWazOTs7Wy6XB4NBkiRLS0sHBgZEIlFWVtbZ2Rl0f38fDAa3trY2NjZisdjy8jLDMLFYzOl0Liws+P3+vb09h8NxdXXl8/mWlpZ+/foVCoVWVlaenp4gt9tN0/To6Ojg4KDVap2amgoEAmaz+cePH8PDwyMjIxMTE+vr61tbWwMDA9++fRsdHf3586fFYrm+voai0ahEIkEQpKKiQi6X8/n83d3d4eFhDMNgGBYKhQAAjUbjcrlwHK+trS0rK6Mois1mRyKRt2UYhk0mE4vF0mq1AACPx0MQRHt7OwAAwzCVSmWxWBYXF6uqqoxGY0FBgcFgkMvl5+fnb5JgGCYWiymKKi8v7+vr8/v9arWax+MpFAoEQTAM29jYmJubEwqFGIa1tLTAMEzT9N3d3T9JuFyu1WqtqqrKzc09OTmxWq0lJSW9vb1dXV3v3783mUynp6coitbV1Y2MjJT+5eLiAspkMvPz862trYODg7OzsyRJut1up9NpMBjUavXMzIxerx8aGrq4uJicnKQoymKxjI+P/7udyWR2dnbsdvvv37+9Xq/b7b6+vt7f37fZbHt7e16v1+VyBYPBVCpls9m2t7d9Pt/R0ZHD4XgLw+PxNDc3kyQpFoulUimGYQ6Ho7+/HwDQ0NAgFosBAAaDYXd3FwBAEMT/FfH5/LcwIpEIgiA9PT0lJSVmsxkA4HQ6dTqdUqkUiUQSiYT+i8PhEAgEer2+uLj4+/fvAIBoNAptbm6y2WyNRsPj8err6zs6OqLRqEAgoCiKJEmBQNDY2Li6umq1Wrlc7qdPnzgcTmNjo1qtfnh4gMLhMEEQCIJ8/fq1uroax/FEImEymfh8vlKp1Ol0eXl5y8vLdrsdx3GhUGg0GsvLy1taWh4fH6HLy8uenh4YhrVarUqlysnJsdlsa2trHA6HJEmtVltZWSmTyVKpVHt7O4/HUyqVzc3N+fn5oVAIenl5SafTXq83mUwyDJNIJP78+fP4+Oj3+yORCPOXdDr9+voai8V8Pt/5+XkymYzH46+vr/8B6C1uhw0uCDwAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Caustics Map"
        title="Caustics Map"
        src="/static/0bdfcadcf8550c5e135a9f40d20bc6eb/80b2d/cause.png"
        srcset="/static/0bdfcadcf8550c5e135a9f40d20bc6eb/8a4e8/cause.png 150w,
/static/0bdfcadcf8550c5e135a9f40d20bc6eb/80b2d/cause.png 224w"
        sizes="(max-width: 224px) 100vw, 224px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span>
<em><center>Figure 5: Samples of Caustics Map</center></em></p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/4a1ab10daf505439b287742c8d45d693/5a190/3.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 41.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAn0lEQVQY06WR0QrCMAxF9///KHRIh8KGs1lqm92kYp2yPQxFz0PgQg7ckKb8QaOqzjnvfc45vTCzr2Qzm7YQ0TAM8XYzYF4hIuu4yEQUKgC0ApEz8yklBbSu5pyZ2cw28l4lLaUTOaaUgVKKmY3j2Pc9alxq78nPswk4hHBhBkBEHKOqfpYffp2zWRQhomsIHCNNk+8617YAmh8+9L7/DiJu1yejoGF6AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Caustics Rendering"
        title="Caustics Rendering"
        src="/static/4a1ab10daf505439b287742c8d45d693/0a47e/3.png"
        srcset="/static/4a1ab10daf505439b287742c8d45d693/8a4e8/3.png 150w,
/static/4a1ab10daf505439b287742c8d45d693/5a46d/3.png 300w,
/static/4a1ab10daf505439b287742c8d45d693/0a47e/3.png 600w,
/static/4a1ab10daf505439b287742c8d45d693/5a190/3.png 800w"
        sizes="(max-width: 600px) 100vw, 600px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span>
<em><center>Figure 6: Caustics Rendering</center></em></p>
<h2>Miscellaneous</h2>
<p><strong>Fresnel Effect</strong> A principle of reflectivity. Shallow angle = strong reflectivity, steep angle = weak reflectivity. By applying this principle to reflection and refraction rendering, one can improve the realism of water rendering.
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/1abd915f67ab0d7ba61d0966146a0332/5a190/4.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 46.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAv0lEQVQoz6WQ24qEMAxA/f/v87F4gYpQRZ2W3FqbLmsX8W1m2POUCycJaco3eO9DCHfafG6e57mua4yxlKKqb+SUkve+xkQUQqjOR5tzzkRUSgGAfd+fJgDknP9kvbh7qrosyzzPRMTMx3HUIgAwszGmbVsRebNZRIgIEadpMsZYa18XIvJ7dp0HAIjID0QEAIZhcM5Za51zIYQYo4iklOrbmpzzOI5933ddBwAicvuIuG1bHZRSYmZ6oKpN+Qc/dIQPmBBo63QAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Fresnel Rendering"
        title="Fresnel Rendering"
        src="/static/1abd915f67ab0d7ba61d0966146a0332/0a47e/4.png"
        srcset="/static/1abd915f67ab0d7ba61d0966146a0332/8a4e8/4.png 150w,
/static/1abd915f67ab0d7ba61d0966146a0332/5a46d/4.png 300w,
/static/1abd915f67ab0d7ba61d0966146a0332/0a47e/4.png 600w,
/static/1abd915f67ab0d7ba61d0966146a0332/5a190/4.png 800w"
        sizes="(max-width: 600px) 100vw, 600px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span>
<em><center>Figure 6: Fresnel Rendering</center></em></p>
<h2>Result</h2>
<p>Combining those components together, you get the result down below: an improved version of vanilla water from early reveal screenshots. While not the fanciest water you might have ever seen but still, it looks more watery than AoE4's attempt.
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/c44217ee42f86284b47221ea2a3b32ac/2bef9/result.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 68.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAC4ElEQVQozwXBh3KiaAAAYB5gZ3Mma6zBCgaF8BvKL70XkS4q6kWNuskWZ+fm5t5/7vuQw4L8njKuPNS5hin1ylwtYlYVcBFiPEBnRIOZNOhJDZAVbnpvilVPatuz5oyra7CNLC0sdsaZDSKFTAUshj1fGx735qqAhtRyX7sO2xVx1Jz2mcmTDPoa24WgDkGVBXVkYY4j2Dspo0syDp2JrNA81Uq07ttWm6u0RjXWHp4qRGKNIXicYg263+AJVAXYqFtHTLlvSd1Sw//bsLtsesjEwqBOPghkLIKDf0t1BZ9DiAlMA4zvZmSbRB9NgIUGrgjfkBmoK2yHGVctiKUWSITh0aIynQCjqsN1t+4kE0YR3VsGgmuxAv+sQTzWQGy083kPiWzKMl5UDlf6jQQOCgtzlcHh5L3tXIMZKhQayljpE548mLuzKHcKmwnkiWXSUeIgq11m2IxOdyyiFlCdk0uL/EO8wP78s8wzVWcxjmiSREWgqjLTdF16mWrLMo6LQFd6SLbJFXX8OqlKr6gvdAyIUpM7QH3Jo9HpHASJIs2eIVkP5dFCJtLULJZKZBOXa7YpDSTJ5+U+N+XelKzKzCPP3Znqg6/XY61+ycGPa/gW89cFcw7A2X+5ZXDvkonW2q7g5ecR8X129/53mio6W3Fmj67WtFR0H4wLGzv6zz9C8H0xPc+pa0DfMvjh0dq05uj366i2TUlk4+PHa3m6lqlHLNROoPVC6yl2hpbSMcTuNRePHrWxyJ0D1jqxNgmeqs3oqi5XDO0rsrWbp4N3/Hku1o7A1VylHRjNxBlIfJ157QaJl7icyw71FzTx+etH5plAoFqAqNHkX0gqP2Qe/n5dv3+WRUiv7IEhNg0JXWbG5rgOE1tknyIFOxXS+WP567YpSp/nngnsfjj4ipw36mGjfd7Ov28fl0PoqagqtLyFtDvv306ZzHZI/IuttFc5tT0In7/Scj/XHJGeYtiw8j/bycewnABMywAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Result"
        title="Result"
        src="/static/c44217ee42f86284b47221ea2a3b32ac/0a47e/result.png"
        srcset="/static/c44217ee42f86284b47221ea2a3b32ac/8a4e8/result.png 150w,
/static/c44217ee42f86284b47221ea2a3b32ac/5a46d/result.png 300w,
/static/c44217ee42f86284b47221ea2a3b32ac/0a47e/result.png 600w,
/static/c44217ee42f86284b47221ea2a3b32ac/1cfc2/result.png 900w,
/static/c44217ee42f86284b47221ea2a3b32ac/2bef9/result.png 1024w"
        sizes="(max-width: 600px) 100vw, 600px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span>
With time and effort, you can make it even more convincing but that is a discussion for another time.</p></div></div><footer><div class="footer__content"><p>OpenSAGE is not associated with Electronic Arts or any other company. All trademarks are property of their respective owners. Screenshots of copyrighted works are only used for demonstration purposes.</p><p>Â© OpenSAGE <!-- -->2021</p></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/water-rendering";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-4d452037006af707f98e.js"],"app":["/app-4c0eca78ab875c07fb76.js"],"component---src-pages-404-js":["/component---src-pages-404-js-d44c0a818ce890b8c614.js"],"component---src-pages-blog-js":[],"component---src-pages-index-js":["/component---src-pages-index-js-b712fcc8262034a481fa.js"],"component---src-templates-post-js":["/component---src-templates-post-js-4e75ef5397eab02032db.js"]};/*]]>*/</script><script src="/polyfill-4d452037006af707f98e.js" nomodule=""></script><script src="/component---src-templates-post-js-4e75ef5397eab02032db.js" async=""></script><script src="/146795efe668deebd307e23d1bee48404d46676b-61b9cf2c73f895e6907b.js" async=""></script><script src="/app-4c0eca78ab875c07fb76.js" async=""></script><script src="/framework-3ff8eac72944ada5b1d3.js" async=""></script><script src="/webpack-runtime-da80e4af2c7a62b87dee.js" async=""></script></body></html>